<!DOCTYPE html>
<html>

<head>
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
</head>

<body>
    <!-- Add this to your HTML file -->
    <script>
        console.log('Dashboard page loaded');

        const token = localStorage.getItem('token');
        const username = localStorage.getItem('username');

        if (!token || !username) {
            console.log('Token or username is missing. Redirecting to login page.');
            window.location.href = '/login'; // redirect to login page if token is missing
        }

        /* const getDataBtn = document.getElementById('get-data-btn');
        getDataBtn.addEventListener('click', async () => {
            console.log('Get data button clicked');

             const response = await fetch('/api/data', {
                  method: 'GET',
                  headers: {
                      'Authorization': `Bearer ${token}`,
                  },
              }); 

            console.log('Response received');

            const data = await response.json();
            const dataContainer = document.getElementById('data-container');
            dataContainer.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;

            console.log('Data rendered'); 
        });*/
    </script>

    <!-- Your webpage content here -->
    <div class="container">
        <div class="header">
            <h1>Summafy Dashboard</h1>
            <p>Here you can upload documents and view the history of activities.</p>
        </div>

        <ul class="nav-links">
            <li><a href="/upload">Upload Document</a></li>
            <li><a href="/view">View Documents</a></li>
        </ul>

        <div class="activity-history">
            <h2>Activity History</h2>
            <ul>
                {{ range .act }}
                <li>
                    <span class="activity-date">{{ .Date }}</span>
                    <span class="activity-user">{{ .User }}</span>
                    <span class="activity-description">{{ .Activity }}</span>
                    <span class="activity-document"><a href="{{ .Document.Href }}">{{ .Document.Rel
                            }}</a></span>
                </li>
                {{ end }}
            </ul>
        </div>
    </div>
</body>

</html>